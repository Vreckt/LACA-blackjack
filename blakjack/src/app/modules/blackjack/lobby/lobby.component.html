<div *ngIf="init">
    <mat-toolbar color="primary" >
        <mat-toolbar-row style="height: 32px;" fxLayoutAlign="space-between center">
          <span>Black Jack - Table : {{ table.name }}</span>
          <button mat-button (click)="onLeaveTable()">Quitter</button>
        </mat-toolbar-row>
        <mat-toolbar-row style="background-color: white; color: black; height: auto; height: 32px;" fxLayoutAlign="center center">
          <span>{{ message }}</span>
        </mat-toolbar-row>
    </mat-toolbar>
    <br>
    <div fxLayout="row" fxLayoutAlign="space-around" *ngIf="showTable">
      <div class="left_side" fxLayout="column">
        <div class="other_player_list" fxLayout="row wrap" fxLayoutAlign="space-around">
          <div class="other_player" *ngFor="let player of table.players" fxLayout="column" [ngClass]="{'hisTurn': player.id === table.currentPlayer}">
            <div class="other_player_header" fxLayoutAlign="space-between center">
              <div fxLayout="row" fxLayoutAlign="center center"><div class="s-icon p-{{player.icon}}"> </div><div>{{ player.name }}</div></div>
              <div>21</div>
            </div>
            <div class="other-card-area" fxlayout="row" fxLayoutAlign="center center">
                <div class="other-card"
                  *ngFor="let card of player.hand"
                  style="background-image: url(../../../../assets/images/cards/{{card.name}}.jpg);"
                  fxlayout="row">
                </div>
            </div>
            <div class="other_player_footer" fxlayout="row" fxLayoutAlign="center center">
              Mise: {{player.currentBet}}
            </div>
          </div>
        </div>
      </div>
      <div class="right_side" fxLayout="column">
        <div class="bank-area" fxlayout="row" fxLayoutAlign="center center">
          <div *ngFor="let card of table.bank.hand">
            <div class="bank_card"
            style="background-image: url(../../../../assets/images/cards/{{card.name}}.jpg);"
             *ngIf="card.visible"
              fxlayout="row">
              </div>
              <div class="bank_card"
              *ngIf="!card.visible"
              style="background-image: url(../../../../assets/images/cards/blue_back.jpg);"
              fxlayout="row">
              </div>
          </div>
        </div>
        <div *ngIf="!showBet" class="player-area" fxlayout="column">
          <div class="player-card-area" fxlayout="row" fxLayoutAlign="center center">
            <div class="player-card"
            *ngFor="let card of player.hand"
            style="background-image: url(../../../../assets/images/cards/{{card.name}}.jpg);"
            fxlayout="row">
            </div>
          </div>

          <div class="player-bet-info" fxlayout="row" fxLayoutAlign="center center">
            Mise: {{player.currentBet}} - Credits: {{player.credits}} - Score: {{player.score}}
          </div>

          <div class="player-action-area" fxLayout="row" fxLayoutGap="20px">
            <button mat-raised-button color="primary" (click)="drawCard()" [disabled]="!enableDrawBtn">Piocher</button>
            <button mat-raised-button color="warn" (click)="doubleBet()" [disabled]="!enableDoubleBtn">Doubler</button>
            <button mat-raised-button (click)="endRound()" [disabled]="!enableEndTurn">Fin de tour</button>
          </div>
        </div>
        <div *ngIf="showBet" class="player-area" fxLayout="column">
          <div class="player-bet-area" fxlayout="row" fxLayoutAlign="center center">
            <div class="player-bet-div " fxLayout="column" fxLayoutAlign="center center">
              Credits: {{player.credits}}
              <form class="example-form">
                  <mat-form-field class="example-full-width">
                      <mat-label>Mise</mat-label>
                      <input matInput type="number" placeholder="50" autocomplete='off' (keypress)="inputBetValidator($event)"
                          (keyUp.enter)="sendBet()" [(ngModel)] ='betAmount' name="betInput">
                      <span matSuffix>â‚¬</span>
                  </mat-form-field>
              </form>
              <button [disabled]="betAmount <= 0 || betAmount > player.credits" mat-raised-button color="primary" (click)="sendBet()">Valider la mise</button>
          </div>
          </div>
        </div>
      </div>
    </div>
    <div fxLayout="column" fxLayoutAlign="center center" *ngIf="!showTable">
      <div fxLayout="row wrap" fxLayoutAlign="space-between" fxLayoutGap="15px">
        <div fxLayout="column" fxLayoutAlign="space-between" class="lobby-player">
          <div></div>
          <div  fxLayoutAlign="center">
            <mat-icon color="primary">person</mat-icon>
          </div>
          <div fxLayoutAlign="center">{{ player.name }}</div>
        </div>

        <div *ngFor="let player of table.players" fxLayout="column" fxLayoutAlign="space-between" class="lobby-player">
            <div class="lobby-player-header" fxLayout="row" fxLayoutAlign="end">
              <mat-icon *ngIf="isAdmin" (click)="onRemovePlayer(player.id)" color="primary">close</mat-icon>
            </div>
            <div  fxLayoutAlign="center">
              <mat-icon color="primary">person</mat-icon>

            </div>
            <div fxLayoutAlign="center">{{ player.name }}</div>
        </div>

      </div>
      <br>
      <button *ngIf="isAdmin" (click)="onStartGame()">Commencer</button>
    </div>

</div>
<!-- <button (click)="trigger()">trigger</button> -->
